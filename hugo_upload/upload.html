<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>HTML5 上传</title>
<script type="text/javascript" src="http://est.oa.com/js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="fileuploader.js"></script>
<script type="text/javascript">
$(function(){
var getUrlParam = function(){
		var url = top.window.location.href;
		var u, params, StrBack = '';
		if (arguments[arguments.length - 1] == "#") 
			u = url.split("#");
		else 
			u = url.split("?");
		if (u.length == 1) 
			params = '';
		else 
			params = u[1];
		
		if (params != '') {
			gg = params.split("&");
			var MaxI = gg.length;
			str = arguments[0] + "=";
			for (i = 0; i < MaxI; i++) {
				if (gg[i].indexOf(str) == 0) {
					StrBack = gg[i].replace(str, "");
					break;
				}
			}
		}
		return StrBack;
	};	
	
var p = getUrlParam('id')
console.info(p)
new qq.FileUploader({							//上传对象
	element: document.getElementById("upa"),
	action: 'fileuploader.php',
	params:{
		folder:p
	},
	onComplete: function(id, fileName, responseJSON){
		if(!responseJSON.error){
			console.info(responseJSON)
		}
	}
	})	
})
</script>
<style>
.qq-uploader{width:100%; height:100%;}
.qq-upload-drop-area{width:100%; height:100%;}
</style>
</head>

<body id="up">
<div id="upa" style="width:1020px; height:800px; background:#FCF"></div>

</body>
</html>
